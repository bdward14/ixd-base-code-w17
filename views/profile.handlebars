<!doctype html>
<html>
  <head>
    <title>Profile</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href = "/css/profile.css" rel = "stylesheet">

    <!-- Bootstraps-->
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/bootstrap-theme.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>


    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->
  </head>

  <body>

    <!-- Bar at the top with back button and logo -->
    <nav class="navbar navbar-default navbar-fixed-top"  role="navigation">
      <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
          <!-- Back button -->
          <button class="btn " type="button" data-toggle="collapse" data-target="#menubar" aria-expanded="false" aria-controls="collapseExample" id="ham">
            <span class="glyphicon glyphicon-menu-hamburger"></span>
          </button>

          <!-- Title of page -->
          <div class="navbar-brand" id="title">{{userName}}'s Profile</div>

          <!-- Logo -->
          <a href = "/index"><img alt="Brand" src="/images/logo-here.png" id="logo"></a>
        </div>

          </div>

          <!-- Collect the nav links, forms, and other content for toggling -->
          <div class="collapse navbar-collapse" id="menubar">
            <div class="card card-block">

              <ul id="list">
              <!-- Inside of navigation bar -->
              <li><a href="/index">Home</a></li>

              <!--<li><a href="html/settings.html"><span id="set">Settings</span></a></li>
              <li><a href="html/sort.html"><span id="sort">Sort Favours</span></a></li>-->
              <li id="logoutFB">Log Out</li>
              </ul>

            </div>
          </div><!-- /.navbar-collapse -->

      </div><!-- /.container-fluid -->
    </nav>
    
    <!-- Tab Menu -->
    <div class="container">


      <ul class="nav nav-tabs">
        <li><a data-toggle="tab" href="#menu0">My Info</a></li>
        <li><a data-toggle="tab" href="#menu1">Completed Favours</a></li>
        <li><a data-toggle="tab" href="#menu2">Statistics</a></li>
        {{#if requestBool}}
        <li><a data-toggle="tab" href="#menu3">Current Favour Requested ({{numRequested}})</a></li>
        {{/if}}
      </ul>

    <div class="tab-content">

 <div id="menu0" class="tab-pane fade">
        <!-- PROFILE INFO-->
        <br>
          <div class="panel panel-primary">
            <!-- Main details of favour -->
              <div class="panel-heading favours" id="top">
              <!-- Image -->
              <a href="{{link}}"><img src = "{{image}}" class = "image"></a>
              <!-- Name -->
              <h1 class="panel-title" id="name">{{userName}}</h1>
            </div>

            <!-- Description of favour -->
            <div class="panel-body" id="bottom">
              <div class="well">
              <h5 id="sub">{{birthday}}</h5>
              </div>
              <div class="about">
                <p>{{about}}</p>
              </div>
            </div>
           </div>
        </div>


      <!-- First tab -->
      {{#if requestBool}}
      <div id="menu1" class="tab-pane fade">
      {{else}}
      <div id="menu1" class="tab-pane fade in active">
      {{/if}}

        <h3>Completed Favours</h3>
        <div class = "table" id = "done">
          <p>You have completed {{completed}} favours.</p>
        </div>

        <div> Level: {{level}} </div>
         <div class="progress">
          <div class="progress-bar {{progressBar}} progress-bar-striped active" role="progressbar" aria-valuenow="{{progressVal}}" aria-valuemin="0" aria-valuemax="100" style="width: {{progressVal}}%">
            <span class="sr-only"> {{levelUp}} till you level up</span>
          </div>
        </div>
        <div class="well well-sm"> Complete {{levelUp}} more favours to level up!</div>

      </div>

      <!-- Second tab -->
      <div id="menu2" class="tab-pane fade">
        <h3>Statistics</h3>
        <div class="table" id="owe">
          <p>You currently owe {{inDebt}} favours.</p>
        </div>


          <div> <strong>Completed vs Owed </strong> Who wins? </div>
          <div class="progress">
            <div class="progress-bar progress-bar-success progress-bar-striped active" style="width: {{completedPercent}}%">
              <span class="sr-only">Completed (success)</span>
            </div>
            <div class="progress-bar progress-bar-danger progress-bar-striped active" style="width: {{owedPercent}}%">
              <span class="sr-only">Owed (danger)</span>
            </div>
          </div>
      </div>

      <!-- Third tab -->
      {{#if requestBool}}
        <div id="menu3" class="tab-pane fade in active">
        <div class="well" id="favoursRequested">The favours you are requesting</div> 
        <!-- Main part of page -->
        <div class = "main-container" align="center" id="5"> 
       
          <!-- Favors Requested -->
          {{#each favours}}
          <div class="panel panel-primary" id="5">
              <div class="panel-heading favours" id="top">
              <img src = "{{image}}" class = "image">
            </div> 

            <h4 id="sub">{{subject}}</h4>


            <!-- Description of favour -->
            <div class="panel-body" id="bottom">
              <div class="well">
                <h4 id="time">By {{time}}</h4>
                <h4 id="loc">At {{location}}</h4>
              </div>
              <div class="description" id="describe">
                <p>{{description}}</p>
              </div>
            </div>
            <!-- Withdraw button -->
            <a href="/withdraw/{{status}}/{{name}}/{{subject}}/{{location}}/{{id}}" role="button" aria-haspopup="true" aria-expanded="false" id="withdraw button"><button type="button" class="btn btn-danger btn-smll" id="button">
              Cancel Request
            </button></a>

          </div>
          {{/each}}

        </div>

        {{else}}
        <br><br>
        <div class="alert alert-info" role="alert">You are currently not requesting a favour</div> 
        {{/if}}
   


    <script src="https://code.jquery.com/jquery.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    {{> facebook}}
     <script src="/js/facebook.js"></script>
     <script src="/js/logout.js"></script>

  </body>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-92480101-2', 'auto');
  ga('send', 'pageview');

</script>
</html>